@{
	ViewData["Title"] = "Receipt Details";
}

<section class="financial-affairs receipt">
    <div class="container py-4">
        <h2 class="text-center mb-4">Tuition Receipt</h2>

        <form asp-action="AddReceipt" asp-controller="FinancialAffairs" class="receipt-form m-auto">
            <div class="d-flex justify-content-between px-5 fs-5" style="direction: rtl;">
                <div>
                    <label for="">Registration</label>
                    <span id="semester"></span>
                </div>
                <div>
                    <span id="date3"></span>
                </div>
            </div>
            <div class="bg-light p-2">
                <div class="header-form d-flex justify-content-start align-items-center gap-2 w-100">
                    <div class="d-flex gap-1 w-60 justify-content-start align-items-center">
                        <label for="receiptNo" class="p-1 w-35"
                               style="background-color: rgb(199, 199, 199);">
                            Receipt
                            No
                        </label>
                        <input type="text" class="form-control bg-transparent border-0" id="receiptNo" readonly>
                    </div>
                    <div class="d-flex gap-1 w-80 justify-content-start align-items-center">
                        <label for="college-name" class="p-1 w-35"
                               style="background-color: rgb(199, 199, 199);">
                            College
                            Name
                        </label>
                        <input type="text" class="form-control bg-transparent border-0" id="college-name" readonly>
                    </div>
                </div>
                <div>
                    <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                        <label for="fees" class="p-1">Amount /</label>
                        <input type="text" style="width: 5rem;" class="form-control bg-transparent border-0"
                               id="fees" readonly>
                        <input type="text" class="bb-1 form-control w-50 bg-transparent " id="fees-text">
                    </div>
                    <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                        <label for="fees-text" class="p-1">It's Value /</label>
                        <input type="text" class="bb-1 form-control w-50 bg-transparent " id="fees-text">
                    </div>
                    <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                        <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                            <label for="date1" class="p-1 w-35">Due Date /</label>
                            <input type="text" class="form-control bg-transparent border-0" id="date1" readonly>
                        </div>
                        <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                            <label for="date2" class="p-1 w-35">Payment Date /</label>
                            <input type="text" class="form-control bg-transparent border-0" id="date2" readonly>
                        </div>
                    </div>
                    <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                        <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                            <label for="name" class="p-1 w-35">Student Name /</label>
                            <input type="text" class="form-control bg-transparent border-0" id="name" readonly>
                        </div>
                        <div class="d-flex gap-1 w-100 justify-content-start align-items-center">
                            <label for="reg-year" class="p-1 w-35">Class /</label>
                            <input type="text" class="form-control bg-transparent border-0" id="reg-year" readonly>
                        </div>
                    </div>
                    <div class="d-flex gap-1 w-100 justify-content-start align-items-center mb-5">
                        <div class="d-flex gap-1 w-50 justify-content-start align-items-center">
                            <label for="finanName" class="p-1 w-35">Emplyee Name /</label>
                            <input type="text" class="bb-1 form-control w-50 bg-transparent " id="finanName">
                        </div>
                        <div class="d-flex gap-1 w-sm-40 justify-content-start align-items-center" style="width:25%">
                            <label for="level" class="p-1 w-35">Level</label>
                            <input type="number" class="text-center form-control w-25 border-0" id="level" readonly>
                        </div>
                    </div>
                    <div class="d-flex gap-5 w-100 justify-content-center text-center align-items-center mb-5">
                        <div>
                            <label for="finsignature" class="">Financial Affairs Signature</label>
                            <input type="text" class="w-100 bb-1 form-control bg-transparent " id="finsignature">
                        </div>
                        <div>
                            <label for="stdsignature">Student Affairs Signature</label>
                            <input type="text" class="w-100 bb-1 form-control bg-transparent " id="stdsignature">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row text-center fs-5">
                <div class="col br-1">
                    Call 27272145 / 27272146
                </div>
                <div class="col br-1">
                    info@mti.edu.eh
                </div>
                <div class="col br-1">
                    http://www.mti.edu.eg
                </div>
                <div class="col">
                    19041 HOTLINE
                </div>
            </div>
            <div class="d-flex gap-5 justify-content-around align-items-center mt-5">
                <button class="btn w-25 btn-lg btn-primary" type="submit">Confirm</button>
                <button class="btn w-25 btn-lg btn-primary" onclick="window.print()" type="button">Print</button>
            </div>
        </form>
    </div>
</section>

@section Scripts {
	<script>
          var std = JSON.parse(sessionStorage.getItem("studentFees"));
          console.log(std)
          function generateReceiptNumber() {
            // Get the current date in YYYYMMDD format
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, "0"); // Months are zero-indexed
            const day = String(date.getDate()).padStart(2, "0");
            const formattedDate = `${year}${month}${day}`;

            // Generate a random 6-digit number
            const randomNumber = Math.floor(10000 + Math.random() * 90000); // Ensures a 6-digit number

            // Combine "r", date, and random number to form the receipt number
            const receiptNumber = `R${formattedDate}${randomNumber}`;

            return receiptNumber;
          }

          // Example usage
          const receipt = generateReceiptNumber();
          document.getElementById("receiptNo").value = receipt;
          document.getElementById("college-name").value = std.college;
          document.getElementById("fees").value = std.fees;
          document.getElementById("date1").value = std.date;
          document.getElementById("date2").value = std.date;
          document.getElementById("date3").innerHTML = std.datetime;
          document.getElementById("name").value = std.name;
          document.getElementById("reg-year").value = std.reg_year;
          document.getElementById("level").value = std.level;
          document.getElementById("semester").innerHTML = std.semester;

	</script>
}